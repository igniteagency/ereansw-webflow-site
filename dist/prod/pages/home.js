"use strict";(()=>{var m=document.getElementById("hero-svg"),D=document.getElementById("textpath");if(!m||!D)throw new Error("Required SVG elements not found");var c=D.getTotalLength(),R=c*.25,k=c*-2e-4,v=R+k,L=c*.001,i=document.getElementById("progress-circle");if(!i)throw new Error("Progress circle element not found");var T=i.getTotalLength(),C=null;i.style.strokeDasharray=T.toString();i.style.strokeDashoffset=T.toString();var B=Array.from(document.querySelectorAll("#hero-school-list .hero_background_image-wrapper")),G=B.map(e=>({name:e.dataset.schoolName||"",id:e.dataset.schoolId||"",element:e})),f=G.map(e=>e.name),a=f.length,h=f.concat(f,f),l=a,w=null,s=document.createElementNS(m.namespaceURI,"g");s.id="schools-group";m.appendChild(s);var d=[],E=[],g=[];function N(e){return e<a?-1:e>=h.length-a?1:0}function F(e){e===-1?(h=f.concat(h.slice(0,h.length-a)),l+=a):e===1&&(h=h.slice(a).concat(f),l-=a)}function M(){if(!m)throw new Error("SVG element not available");let r=window.innerWidth*.02,o=Math.min(18,Math.max(12,r)),t=m.getBoundingClientRect().width;return o*100/t}function V(){if(!m)throw new Error("SVG element not available");for(s.style.textAnchor="";s.firstChild;)s.removeChild(s.firstChild);let e=M();console.log("fontVB",e),s.style.fontSize=`${e}px`,h.forEach((r,o)=>{let n=document.createElementNS(m.namespaceURI,"text");n.setAttribute("class","hero-svg-text"),n.style.cursor="pointer",n.addEventListener("click",()=>A(o));let t=document.createElementNS(m.namespaceURI,"textPath");t.setAttribute("href","#textpath"),t.setAttribute("startOffset","0"),t.textContent=r,n.appendChild(t),s.appendChild(n)}),document.fonts.ready.then(()=>{requestAnimationFrame(()=>{g=Array.from(s.childNodes).filter(u=>u instanceof SVGTextElement);let o=g.map(u=>u.getComputedTextLength()),t=o.reduce((u,p)=>u+p,0)+L*(g.length-1),x=v-t/2;d=[],E=[],g.forEach((u,p)=>{x+=o[p]/2;let S=u.querySelector("textPath");if(!S)throw new Error("TextPath element not found");let O=(x+c)%c;S.setAttribute("startOffset",O.toString()),d.push(O),E.push(S),x+=o[p]/2+L}),console.log("SVG text widths:",o),s.style.textAnchor="middle"})})}function j(){let e=d[l],r=v-e;E.forEach((n,t)=>{let b=(d[t]+r+c)%c;gsap.to(n,{attr:{startOffset:b},duration:.8,ease:"power4.out"})}),g.forEach((n,t)=>{n.classList.toggle("active",t===l)});let o=l%a;G.forEach((n,t)=>{n.element.classList.toggle("active",t===o)})}function P(){let e=d[l],r=v-e;E.forEach((n,t)=>{let b=(d[t]+r+c)%c;n.setAttribute("startOffset",b.toString())}),g.forEach((n,t)=>{n.classList.toggle("active",t===l)});let o=l%a;G.forEach((n,t)=>{n.element.classList.toggle("active",t===o)})}function y(){if(!i)throw new Error("Progress circle element not available");C&&gsap.killTweensOf(i),i.style.strokeDashoffset=T.toString(),C=gsap.to(i,{strokeDashoffset:0,duration:5e3/1e3,ease:"none"})}function I(){w!==null&&clearTimeout(w),w=window.setTimeout(()=>A(l+1),5e3)}function A(e){let r=N(e);l=e,j(),y(),I(),r!==0&&setTimeout(()=>{F(r),V(),P()},.8*1e3)}window.setActive=A;window.addEventListener("resize",()=>{V(),P(),y()});V();P();y();I();})();
